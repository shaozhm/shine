<?xml version="1.0" encoding="UTF-8"?>
<project name="filter-metadata" default="main">
    <taskdef resource="net/sf/antcontrib/antcontrib.properties"/>
    <target name="main">
        <echo>Filtering SAP-internal metadata from package.json files in ${basedir}/node_modules ...</echo>
        <foreach target="filter-file" param="file">
            <path>
                <fileset dir="${basedir}/node_modules" casesensitive="yes">
                    <include name="**/package.json"/>
                </fileset>
            </path>
        </foreach>
    </target>
    <target name="filter-file">
        <exec executable="${basedir}/${node.exe}">
            <arg value="filter-metadata.js"/>
            <arg value="${file}"/>
        </exec>
    </target> 
</project>